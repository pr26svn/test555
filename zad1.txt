1. сделал бы модуль который позволяет сделать настройки X и N
2. в нем же бы реализовал функцию проверки активности акции и выдачи итоговой стоимости товаров в корзине по заданному условию
3. кастомизировал бы корзину чтобы итоговая стоимость бралась бы из функции описанной ранее и по тому же принципу бы кастомизировал оформление заказа
